{
    "conflicts": [
        {
            "id": "7f83c478-5037-4126-b05b-a0b9aa3b78cb",
            "currentContent": "<?php\n\nnamespace App\\Filament\\Resources\\Panel\\OrderResource\\Pages;\n\nuse App\\Models\\Item;\nuse Filament\\Actions;\nuse Filament\\Forms\\Components\\Select;\nuse Filament\\Pages\\Actions\\Action;\nuse Filament\\Resources\\Pages\\ViewRecord;\nuse App\\Filament\\Resources\\Panel\\OrderResource;\n\nclass ViewOrder extends ViewRecord\n{\n    protected static string $resource = OrderResource::class;\n\n    protected function getHeaderActions(): array\n    {\n        return [\n            Actions\\EditAction::make(),\n            Action::make('change_status')\n            ->color('success')\n                ->icon('heroicon-m-arrow-path')\n                ->tooltip('Change Status')\n                ->form([\n                    // Status dropdown\n                    Select::make('status')\n                        ->label('Status')\n                        ->options(function ($record) {\n                            // Base options\n                            $options = [\n                                'Waiting' => 'Waiting',\n                                'Approve' => 'Approve',\n                                'Reject' => 'Reject',\n                            ];\n\n\n\n                            return $options;\n                        })\n                        ->required()\n                        ->placeholder('Select a status')\n                        ->default(fn($record) => $record->status ?? 'pending')\n                        ->reactive(),\n\n\n\n\n                ])\n                ->action(function ($record, array $data) {\n                    // Update the status when the action is triggered\n                    $record->status = $data['status'];\n                    $record->save();\n                    if ($record->status == 'Approve') {\n                        foreach ($record->orderItems as $asset) {\n                            $item = new Item();\n                            $item->name = $asset->name;\n                            $item->barcode = $asset->barcode;\n                            $item->barcode_image = $asset->barcode_image;\n                            $item->status = 'in_where_house';\n                            $item->warehouse_id = $record->warehouse_id;\n                            $item->save();\n\n                        }\n                    }\n\n\n                })\n        ];\n\n    }\n}\n",
            "newContent": "<?php\n\nnamespace App\\Filament\\Resources\\Panel\\OrderResource\\Pages;\n\nuse Filament\\Actions;\nuse Filament\\Resources\\Pages\\ViewRecord;\nuse App\\Filament\\Resources\\Panel\\OrderResource;\n\nclass ViewOrder extends ViewRecord\n{\n    protected static string $resource = OrderResource::class;\n\n    protected function getHeaderActions(): array\n    {\n        return [Actions\\EditAction::make()];\n    }\n}\n"
        }
    ]
}